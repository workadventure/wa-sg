import"./modulepreload-polyfill-3cfb730f.js";import{b as I}from"./init-5da4ed0e.js";let g="https://admin.workadventu.re";function y(){const e=WA.player.userRoomToken;if(e===void 0)throw new Error("No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).");return e}async function T(e,o){if(!WA.player.isLogged)throw new Error("You must be logged to gain XP.");const r=new URL(`/api/quests/${e}/level-up`,g),n=await fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:y()},body:JSON.stringify({xp:o})});if(!n.ok)throw new Error(`An error occurred. HTTP Code: ${n.status} ${n.statusText}.`);const s=await n.json();return s.awardedBadges.length>0&&(async()=>{for(const c of s.awardedBadges)await D(e,c)})().catch(c=>{console.error(c)}),s}async function D(e,o){const r=new URL(`/quests/${e}/badge/${o}/congratulations`,g);r.search=new URLSearchParams({token:y()}).toString(),await WA.ui.website.open({url:r.toString(),position:{vertical:"middle",horizontal:"middle"},allowApi:!0,visible:!0,size:{width:"100%",height:"100%"}})}console.info('"Scavenger" script started successfully');const l=5,t=6,u=7,v=[{ID:1,TITLE:"Emilie GAUCHET",BODY:{EN:"Emilie has been playing soccer for over 20 years.",FR:"Emilie pratique le football depuis plus de 20 ans."},XP:l},{ID:2,TITLE:"Karine BAUDE",BODY:{EN:"Karine practices piloxing. What is it? It's an activity that reveals an iron personality in a velvet glove. In 3 words: dance, pilates and boxing.",FR:"Karine pratique le piloxing. Késako ? C’est une activité qui révèle une personnalité de fer dans un gant de velours. En 3 mots : danse, pilate et boxe"},XP:l},{ID:3,TITLE:"Thierry LOPEZ",BODY:{EN:"Since his earliest childhood, Thierry has been rocked by titles such as Life on Mars? and Starman... in short, he's a true David Bowie fan.",FR:"Depuis sa plus tendre enfance, Thierry a été bercé par les titres : Life on Mars?, Starman… en bref c’est un véritable fan de David Bowie."},XP:l},{ID:4,TITLE:"Delphine LEGAIT DUPRAT",BODY:{EN:"I wish you were here! Our Exco certainly has a musical ear. Delphine is a Pink Floyd fan!",FR:"I wish you were here ! Décidément notre Exco a l’oreille musicale. Delphine est fan de Pink Floyd !"},XP:l},{ID:5,TITLE:"Cédrick TATIN",BODY:{EN:"If you'd like to test your foosball skills, head to the break room to take on Cédrick, our local foosball champion.",FR:"Si vous voulez tester votre niveau au baby foot RDV en salle de pause pour affronter  Cédrick notre champion local de baby-foot."},XP:l},{ID:6,TITLE:"Ruddy SENECHAL",BODY:{EN:"Did you know that our Exco has an incredible talent? Ruddy is Exco's musician.",FR:"Notre Exco a un incroyable talent, le saviez-vous ? Ruddy est le musicien de l’Exco."},XP:l},{ID:7,TITLE:"Georgiana MIHAI",BODY:{EN:"In the sporty category, we have Georgiana, who has already run a half-marathon.",FR:"Dans la série des sportifs, nous avons Georgiana qui a déjà couru un semi-marathon."},XP:t},{ID:8,TITLE:"Nathamuni BASHYAM",BODY:{EN:"Nathamuni has been playing cricket from an early age.",FR:"Nathamuni joue au Cricket depuis son plus jeune âge."},XP:t},{ID:9,TITLE:"Amit ARJUN OJHA",BODY:{EN:"Amit is a passionate photographer with many inspirations.",FR:"Amit est un passionné de la photographie aux multiples inspirations."},XP:t},{ID:10,TITLE:"Emmanuel T JAMPENS",BODY:{EN:"Emmanuel is a choir singer.",FR:"Emmanuel chante dans une chorale."},XP:t},{ID:11,TITLE:"Yves BAUDRY",BODY:{EN:"Yves loves horse-riding.",FR:"Yves aime les balades à cheval."},XP:t},{ID:12,TITLE:"Fabienne POUSSOU",BODY:{EN:"'Let her dance'. Fabienne is the biggest Dalida fan GFL has ever known.",FR:'"Laissez-la danser". Fabienne est la plus grande fan de Dalida que GFL ait connu.'},XP:t},{ID:13,TITLE:"Yann EGA",BODY:{EN:"Yann strengthens the Exco GFL sports team and has been playing basketball for over 35 years.",FR:"Yann renforce l’équipe sportive de l’Exco GFL et pratique le basket depuis plus de 35 ans."},XP:t},{ID:14,TITLE:"Catherine CAISSON",BODY:{EN:"Catherine chose lobster as a symbol of her attachment to Brittany.",FR:"Catherine a choisi le homard en symbole à son attachement à la Bretagne."},XP:u},{ID:15,TITLE:"Isabelle PETIT",BODY:{EN:"Isabelle loves all forms of visual art, especially contemporary art.",FR:"Isabelle adore toutes les formes d'art visuel et en particulier l’art contemporain."},XP:u},{ID:16,TITLE:"Sébastien MELZACKI",BODY:{EN:"Sebastien has been practicing swimming for 15 years in the club.",FR:"Sébastien a pratiqué pendant 15 ans la natation en club."},XP:u}];WA.onInit().then(()=>{async function e(){const o=WA.room.mapURL,r=o.substring(0,o.lastIndexOf("/")),n=new URL(window.location.toString()),s=n.searchParams.get("lang"),c=n.searchParams.get("area"),a=v.find(i=>`scavenger-object${i.ID}`===c),h=document.getElementById("scavenger-title"),p=document.getElementById("scavenger-body"),m=document.getElementById("scavenger-image");let E=document.getElementById("check");const b="sg-onboarding-scavenger-hunt";if(a&&s&&h&&p&&m&&E){const i=`scavenger-object${a.ID}`;h.innerHTML=a.TITLE,p.innerHTML=a.BODY[s],m.src=`./images/${i}.webp`,I().then(async()=>{if(WA.player.state.hasVariable(i))E.innerHTML="&check;",console.log(`You've already discovered item ${a.ID}. No additional XP awarded.`);else{try{await WA.player.state.saveVariable(i,!0,{public:!1,persist:!0,ttl:24*3600,scope:"world"})}catch(d){console.error("Error saving variable:",d);return}if(WA.player.state.loadVariable(i)===!0)try{await T(b,a.XP),console.log(`Discovered item ${a.ID}. ${a.XP} XP awarded!`)}catch(d){console.error("Error granting XP:",d)}else console.error("Variable has been saved but its value was not loaded properly.")}})}else window.location.href=r+"/scavenger/404.html"}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()});
